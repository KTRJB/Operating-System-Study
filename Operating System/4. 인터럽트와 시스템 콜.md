# μ»΄ν“¨ν„° μ‹μ¤ν…
## CPU
- CPUλ” ν΄λ­λ§λ‹¤ μμ°¨μ μΌλ΅ λ©”λ¨λ¦¬μ—μ„ λ…λ Ήμ„ μ½μ–΄μ™€μ„ μ‹¤ν–‰
	- ν΄λ­(clock)μ΄λ€ CPUμ μ†λ„λ¥Ό λ‚νƒ€λ‚΄λ” λ‹¨μ„
- λ‹¤μ λ…λ Ήμ„ μ‹¤ν–‰ν•κΈ° μ „μ— λ“¤μ–΄μ¨ μΈν„°λ½νΈκ°€ μλ”μ§€ ν™•μΈ
<br>

![](https://velog.velcdn.com/images/juyoung999/post/c862558a-eec8-4b8a-9cdc-f02235124f2e/image.png)


### Device Controller
> I/O μ¥μΉλ¥Ό κ΄€λ¦¬ν•λ” μ‘μ€ CPU

- I/O λ””λ°”μ΄μ¤λ§λ‹¤ controllerκ°€ λ‹¬λ ¤μμ–΄ μΌμΆ…μ CPUμ²λΌ λ™μ‘ν•μ—¬ κ΄€λ¦¬
- CPUκ°€ μ§μ ‘ λ””λ°”μ΄μ¤ν•ν… μ”μ²­ν•μ§€ μ•κ³  device controllerμ—μ„ μ”μ²­ν•¨
- μ μ–΄ μ •λ³΄λ¥Ό μ„ν• control register, status registerλ¥Ό κ°€μ§
- local bufferλ¥Ό κ°€μ§(λ°μ΄ν„°λ¥Ό μ €μ¥)
- μ‹¤μ  λ””λ°”μ΄μ¤μ™€ local buffer μ‚¬μ΄μ—μ„ I/Oκ°€ λ°μƒ
- **I/Oκ°€ λλ‚λ©΄ CPUμ—κ² Interruptλ΅ μ•λ¦Ό**
<br>

### DMA controller
>  Direct Memory Acces
νΉμ • ν•λ“μ›¨μ–΄ ν•μ„ μ‹μ¤ν…μ΄ CPUμ™€ λ…λ¦½μ μΌλ΅ λ©”μΈ μ‹μ¤ν… λ©”λ¨λ¦¬μ— μ ‘κ·Όν•  μ μκ² ν•΄μ£Όλ” μ»΄ν“¨ν„° μ‹μ¤ν…μ κΈ°λ¥

- λ°μ΄ν„° κ΄€λ ¨ μΈν„°λ½νΈκ°€ μ‹λ„λ•λ„ μ—†μ΄ λ“¤μ–΄μ¤λ©΄ CPUκ°€ μΌμ„ ν•κΈ° μ–΄λ ¤μ›€
- μ›λλ” λ©”λ¨λ¦¬μ—” CPUλ§ μ ‘κ·Ό κ°€λ¥ν•μ§€λ§ CPU κ°μ… μ—†μ΄ DMAλ¥Ό ν†µν•΄ λ°μ΄ν„°λ¥Ό μ΄λ™μ‹ν‚΄ 
- CPU λ€μ‹ μ— λ©”λ¨λ¦¬μ— λ°μ΄ν„°λ¥Ό λ„κ²¨μ£Όκ³  λ°μ΄ν„° μ΄λ™μ΄ μ™„λ£λμ—λ‹¤λ” λ‹¨ ν• λ²μ μΈν„°λ½νΈλ§ λ°μƒ
- λ°μ΄ν„°κ°€ μ „μ†΅λλ” λ™μ• CPUλ” λ‹¤λ¥Έ μ‘μ—…μ„ μν–‰ν•  μ μμ–΄ ν¨μ¨μ„± π†™
<br>

### Timer
> νΉμ • ν”„λ΅κ·Έλ¨μ΄ CPUλ¥Ό λ…μ ν•μ§€ λ»ν•κ² λ„μ™€μ£Όλ” ν•λ“μ›¨μ–΄

- μ‹κ°„μ„ μ„Έν…ν•΄μ„ ν•΄λ‹Ή μ‹κ°„μ΄ μ§€λ‚λ©΄ μ΄μμ²΄μ λ΅ CPU μ μ–΄κ¶μ„ λ„κΉ€ -> `timer interrupt`
- λ§¤ ν΄λ­ λ§λ‹¤ 1μ”© κ°μ†
- CPUλ¥Ό νΉμ • ν”„λ΅κ·Έλ¨μ΄ λ…μ ν•λ” κ²ƒμ„ λ³΄νΈ
- **time sharing**μ„ κµ¬ν„ν•κΈ° μ„ν• λ°©λ²•
<br>
  
### Mode bit
#### μ»¤λ„ λ¨λ“(0)
- λ¨λ‹ν„° λ¨λ“, μ‹μ¤ν… λ¨λ“
- **μ΄μμ²΄μ **κ°€ CPU μ μ–΄λ¥Ό κ°€μ§
- λ¨λ“  κΈ°λ¥μ„ μν–‰ κ°€λ¥(I/O λ””λ°”μ΄μ¤ μ ‘κ·Ό κ°™μ€)
- interruptλ‚ exception λ°μƒ μ‹ μ»¤λ„ λ¨λ“λ΅ λ³€κ²½λ¨

#### μ‚¬μ©μ λ¨λ“(1)
- **μ‚¬μ©μ ν”„λ΅κ·Έλ¨**μ΄ CPU μ μ–΄κ¶μ„ κ°€μ§
- κΈ°λ¥μ΄ μ ν•λμ–΄ μμ
-> λ‹¤λ¥Έ ν”„λ΅κ·Έλ¨ λλ” μ΄μμ²΄μ μ— ν”Όν•΄κ°€ λμ§€ μ•λ„λ΅(λ³΄μ•μƒ μ΄μ )
<br>

### μ…μ¶λ ¥μ μν–‰
- μ…μ¶λ ¥μ νΉκ¶ λ…λ Ή μ¤‘ ν•λ‚ -> μ‚¬μ©μ ν”„λ΅κ·Έλ¨μ€ λ»ν•¨

#### μ‚¬μ©μ ν”„λ΅κ·Έλ¨μ€ μ–΄λ–»κ² I/Oλ¥Ό μ–»μ„ μ μλ‚?
- μ§μ ‘ λ°›μ•„μ¤λ” κ²ƒμ€ λ¶κ°€λ¥ 
- μ‚¬μ©μ ν”„λ΅κ·Έλ¨μ΄ μ΄μμ²΄μ μ—κ² I/O μ”μ²­ ---> μ΄μμ²΄μ μ— λ¶€νƒ 
- μ‚¬μ©μ ν”„λ΅κ·Έλ¨μ΄ μ΄μμ²΄μ (μ»¤λ„)μ ν•¨μλ¥Ό νΈμ¶ν•λ” κ²ƒ = **μ‹μ¤ν… μ½**
- ν”„λ΅κ·Έλ¨μ„ μ‹¤ν–‰ν•λ‹¤ I/Oκ°€ ν•„μ”ν•λ©΄ μ†ν”„νΈμ›¨μ–΄μ μΌλ΅ μΈν„°λ½νΈλ¥Ό κ±Έμ
- μΈν„°λ½νΈ λ²΅ν„°κ°€ κ°€λ¦¬ν‚¤λ” μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄μΌλ΅ μ΄λ™
- μ‹μ¤ν… μ½μ΄ λλ‚λ©΄ λ‹¤μ λ…λ Ήμ„ μ‹¤ν–‰
<br> 

---

## μΈν„°λ½νΈ
> CPUκ°€ ν”„λ΅κ·Έλ¨μ„ μ‹¤ν–‰ν•κ³ μμ„ λ•, μ…μ¶λ ¥ν•λ“μ›¨μ–΄ λ“±μ μ¥μΉμ— μμ™Έμƒν™©μ΄ λ°μƒν•μ—¬ μ²λ¦¬κ°€ ν•„μ”ν•  κ²½μ°μ— CPUμ—κ² μ•λ ¤ μ²λ¦¬ν•  μ μλ„λ΅ ν•λ” κ²ƒ

- CPU μ μ–΄ λ£¨ν‹΄μ„ μΈν„°λ½νΈ μ²λ¦¬ λ£¨ν‹΄(= μΈν„°λ½νΈ ν•Έλ“¤λ¬)μΌλ΅ λ³€κ²½
<br> 

### μ΄λ²¤νΈ μ²λ¦¬ λ°©λ²• - Polling

μ»΄ν“¨ν„°λ” λ¨λ“  μ ν•μ μ΄λ²¤νΈλ¥Ό κ°μ§€ν•  μ μλ” λ°©λ²•μ΄ μμ–΄μ•Ό ν•¨ β΅οΈ **Polling** & **Interrupt**
<br>λ‘ κ°€μ§€ λ°©λ²•μ„ ν†µν•΄ CPUλ” μ–Έμ λ“  λ°μƒν•λ” μ΄λ²¤νΈλ¥Ό μ²λ¦¬ κ°€λ¥
<br><br>

> ### Polling
λ‹¤λ¥Έ μ¥μΉ(λλ” ν”„λ΅κ·Έλ¨)μ μƒνƒλ¥Ό μ£ΌκΈ°μ μΌλ΅ κ²€μ‚¬ν•μ—¬ μΌμ •ν• μ΅°κ±΄μ„ λ§μ΅±ν•  λ• μλ£μ²λ¦¬λ¥Ό ν•λ” λ°©μ‹

- Deviceλ” μ£Όμκ°€ ν•„μ”ν•μ§€ μ•κ³  polling ν”„λ΅κ·Έλ¨μ΄ μ΅°μ‚¬ν•λ” κ²ƒμ„ κΈ°λ‹¤λ¦¬κΈ°λ§ ν•λ©΄ λ¨
- CPUκ°€ μ§μ ‘ μ§„ν–‰ν•λ”λ° λ¶ν•„μ”ν• pollingμ— μ‹κ°„μ΄ λ‚­λΉ„λμ–΄ λΉ„ν¨μ¨μ 
- μ²λ¦¬ μ‘μ—…μ΄ λ§μ€ μ¤λλ‚  ν”„λ΅μ„Έμ¤ μ‘μ—…μ—λ” μ•λ§μ§€ μ•μ
<br>

### μΈν„°λ½νΈμ μΆ…λ¥
#### ν•λ“μ›¨μ–΄ μΈν„°λ½νΈ
- μΌλ°μ μΌλ΅λ” ν•λ“μ›¨μ–΄κ°€ λ°μƒμ‹ν‚¨ μΈν„°λ½νΈλ¥Ό λ§ν•¨
- **I/O μΈν„°λ½νΈ**: μ…μ¶λ ¥ μ‘μ—…μ΄ μΆ…λ£λμ–΄ κ²°κ³Ό νΉμ€ μ¤λ¥λ΅ μ •μ§€λ κ²½μ° λ°μƒ
- μ΄μ™Έμ—λ„ μ „μ› μ΄μƒ μ‹, CPU κΈ°λ¥ μ΄μƒ μ‹, μ™Έλ¶€ μ¥μΉμ—μ„ μΈν„°λ½νΈ λ°μƒ νΉμ€ νƒ€μ΄λ¨Έ μΈν„°λ½νΈ  

#### μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈ
- Trapμ΄λΌκ³ λ„ ν•¨
- `System Call`λ΅ λ°μƒ
- **Exception**: ν”„λ΅κ·Έλ¨ μ¤λ¥ λ°μƒ ex) 0μΌλ΅ λ‚λ„κΈ°, μ¤λ²„ν”λ΅μ° λ“±
- **System Call**: ν”„λ΅κ·Έλ¨μ—μ„ μ»¤λ„ ν•¨μλ¥Ό νΈμ¶
<br> 

### μΈν„°λ½νΈ κ΄€λ ¨ μ©μ–΄
#### μΈν„°λ½νΈ λ²΅ν„°
- ν•΄λ‹Ή μΈν„°λ½νΈμ μ²λ¦¬ λ£¨ν‹΄ μ£Όμ†λ¥Ό κ°€μ§

#### μΈν„°λ½νΈ ν•Έλ“¤λ¬
- μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄(ISR)μ΄λΌκ³ λ„ ν•¨
- ν•΄λ‹Ή μΈν„°λ½νΈλ¥Ό μ²λ¦¬ν•λ” μ»¤λ„ ν•¨μ
- μΈν„°λ½νΈ μμ‹ μΌλ΅ μ‹¤ν–‰μ΄ νΈλ¦¬κ±° λ¨
- μΈν„°λ½νΈ λ²΅ν„°μ— μΈν„°λ½νΈ ν•Έλ“¤λ¬μ λ©”λ¨λ¦¬ μ£Όμ†κ°€ ν¬ν•¨λμ–΄ μμ
<br>

### μΈν„°λ½νΈ μ°μ„ μμ„
> - μ™Έλ¶€ μΈν„°λ½νΈ > λ‚΄λ¶€ μΈν„°λ½νΈ
> - ν•λ“μ›¨μ–΄ μΈν„°λ½νΈ > μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈ

#### μ™Έλ¶€ μΈν„°λ½νΈ
1. **μ „μ› μ΄μƒ μΈν„°λ½νΈ(Power fail interrupt)**: μ •μ „, νμ› μ΄μƒ λ“±
2. **κΈ°κ³„ μ°©μ¤ μΈν„°λ½νΈ(Machine check interrupt)**: CPUμ κΈ°λ¥μ μΈ μ¤λ¥
3. **μ™Έλ¶€ μΈν„°λ½νΈ(External interrupt)**
	- μμ›μ΄ ν• λ‹Ήλ μ‹κ°„μ΄ λ‹¤ λλ‚ κ²½μ°
	- ν‚¤λ³΄λ“λ΅ μΈν„°λ½νΈ ν‚¤λ¥Ό λ„λ¥Έ κ²½μ°(λ€ν‘μ μΌλ΅ Control + Alt + Delete)
	- μ™Έλ¶€μ¥μΉλ΅λ¶€ν„° μΈν„°λ½νΈ μ”μ²­μ΄ μλ” κ²½μ°
4. **μ…μ¶λ ¥ μΈν„°λ½νΈ(I/O Interrupt)**
	- μ…μ¶λ ¥μ¥μΉκ°€ λ°μ΄ν„° μ „μ†΅μ„ μ”κµ¬ν•κ±°λ‚ μ „μ†΅μ΄ λλ‚ λ‹¤μ λ™μ‘μ΄ μν–‰λμ–΄μ•Ό ν•  κ²½μ°
	- μ…μ¶λ ¥ λ°μ΄ν„°μ— μ΄μƒμ΄ μλ” κ²½μ°

#### λ‚΄λ¶€ μΈν„°λ½νΈ
- μλ»λ λ…λ Ήμ΄λ‚ μλ»λ λ°μ΄ν„°λ¥Ό μ‚¬μ©ν• λ• λ°μƒ
- **ν”„λ΅κ·Έλ¨ κ²€μ‚¬ μΈν„°λ½νΈ(Program check interrupt)**
	- Division by zero
	- Overflow/Underflow
	- κΈ°νƒ€ ν”„λ΅κ·Έλ¨ Exception

#### μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈ
- ν”„λ΅κ·Έλ¨ μ²λ¦¬ μ¤‘ λ…λ Ήμ μ”μ²­μ— μν•΄μ„ λ°μƒ
<br>

### ν”„λ΅κ·Έλ¨μ΄ I/Oλ¥Ό λ°›μ„ λ•
- μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈ(System Call)μ„ μ”μ²­
- I/O λ””λ°”μ΄μ¤κ°€ μ²λ¦¬ν•λ©΄ CPUλ΅ ν•λ“μ›¨μ–΄ μΈν„°λ½νΈλ¥Ό λ³΄λƒ„
<br>
β΅οΈ μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈμ™€ ν•λ“μ›¨μ–΄ μΈν„°λ½νΈ λ¨λ‘ λ°μƒ<br>
β΅οΈ μ΄μμ²΄μ λ” μΈν„°λ½νΈλ΅ μ μ–΄λλ‹¤<br>
<br>

---

## μ‹μ¤ν… μ½
> - μ΄μμ²΄μ μ μ»¤λ„μ΄ μ κ³µν•λ” μ„λΉ„μ¤μ— λ€ν•΄, μ‘μ© ν”„λ΅κ·Έλ¨μ μ”μ²­μ— λ”°λΌ μ»¤λ„μ— μ ‘κ·Όν•κΈ° μ„ν• μΈν„°νμ΄μ¤
> - ν”„λ΅κ·Έλλ° μ–Έμ–΄μ—μ„ μ§€μ›ν•μ§€ μ•λ” κΈ°λ¥μ— λ€ν•μ—¬ μ΄μ μ²΄μ μ λ£¨ν‹΄μ„ νΈμ¶ν•μ—¬ μ΄μ©ν•λ” κ²ƒ
<br>

### μ‹μ¤ν… μ½(μ‹μ¤ν… νΈμ¶) κ³Όμ •
1. ν”„λ΅κ·Έλ¨ λ…λ Ήμ–΄ μ‹¤ν–‰ μ¤‘ μΈν„°λ½νΈ(μ‹μ¤ν… μ½) λ°μƒ
2. CPUλ” ν„μ¬ μ‹¤ν–‰ μ¤‘μΈ ν”„λ΅κ·Έλ¨μ„ μ¤‘λ‹¨ν•κ³  ν”„λ΅κ·Έλ¨ μ„μΉ(PC), λ μ§€μ¤ν„° μƒνƒ λ“±μ„ μ¤νƒμ— μ €μ¥
3. `μ‚¬μ©μ λ¨λ“ -> μ»¤λ„ λ¨λ“` λ³€κ²½
4. μΈν„°λ½νΈ λ²΅ν„°λ¥Ό ν†µν•΄ μ•λ§λ” IRSλ¥Ό μ°Ύμ•„ μ‹¤ν–‰ν•΄ μΈν„°λ½νΈλ¥Ό μ²λ¦¬
5. μ²λ¦¬κ°€ λλ‚λ©΄ IRS λ°ν™ κ°’κ³Ό ν•¨κ» μ¤νƒμ— μ €μ¥ν–λ ν”„λ΅κ·Έλ¨μ„ λ³µκµ¬ν•κ³  λ‹¤μ‹ μ‹¤ν–‰
<br>

![](https://velog.velcdn.com/images/juyoung999/post/3a138db1-bcba-41f8-b6e2-364186ca2596/image.png)

<br>

### μ‹μ¤ν… μ½ μ ν•
#### ν”„λ΅μ„Έμ¤ μ μ–΄(process control) 
- ν”„λ΅μ„Έμ¤ μƒμ„± λ° μ¤‘μ§€ λ“±
- ex) fork, exec, exit..

#### νμΌ μ΅°μ‘(file manipulation)
- νμΌ μƒμ„±, μ‚­μ , κ΄€λ¦¬ λ“±
- ex) create, open, close, lseek..

#### μ¥μΉ κ΄€λ¦¬(device management)
- μ¥μΉ μ—°κ²°, λ°©μ¶, κ΄€λ¦¬ λ“±
- ex) open, close, iocil..

#### μ •λ³΄ μ μ§€(information maintenance)
- μ‹κ°„ λ° λ‚ μ§ μ„¤μ •, ν”„λ΅μ„Έμ¤μ™€ μ—°κ²°λ¤ νμΌ κ΄€λ¦¬ λ“±
- ex) time, date, dump, pid..

#### ν†µμ‹ (communication)
- ν†µμ‹  μ—°κ²° μƒμ„± λ° μ κ±°, λ©”μ‹μ§€ μ†΅μμ‹  λ“±
- ex) connect, accept, read, pope..

<br><br>

---

**μ°Έκ³  λ§ν¬**

[λ°ν¨κ²½ κµμλ‹ κ°•μ - μΊ„ν“¨ν„° μ‹μ¤ν… κµ¬μ΅°](https://core.ewha.ac.kr/publicview/C0101020140311132925816476?vmode=f)<br>
[μ„ν‚¤λ°±κ³Ό - μΈν„°λ½νΈ](https://ko.wikipedia.org/wiki/%EC%9D%B8%ED%84%B0%EB%9F%BD%ED%8A%B8)<br>
[μ„ν‚¤λ°±κ³Ό - μ‹μ¤ν… νΈμ¶](https://ko.wikipedia.org/wiki/%EC%8B%9C%EC%8A%A4%ED%85%9C_%ED%98%B8%EC%B6%9C)<br>
[μ‹μ¤ν… μ½κ³Ό μΈν„°λ½νΈ](https://latter2005.tistory.com/m/43)<br>
[μΈν„°λ½νΈ(interrupt) & μ‹μ¤ν…μ½(system call)](https://velog.io/@minzz/OS-3.-%EC%9D%B8%ED%84%B0%EB%9F%BD%ED%8A%B8interrupt-%EC%8B%9C%EC%8A%A4%ED%85%9C%EC%BD%9Csystem-call)<br>
[μ„ν‚¤λ°±κ³Ό - DMA](https://ko.wikipedia.org/wiki/%EC%A7%81%EC%A0%91_%EB%A9%94%EB%AA%A8%EB%A6%AC_%EC%A0%91%EA%B7%BC)<br>
[ITμ„ν‚¤ - μΈν„°λ½νΈ](https://itwiki.kr/w/%EC%9D%B8%ED%84%B0%EB%9F%BD%ED%8A%B8)
